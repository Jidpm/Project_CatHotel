generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum Role {
  ADMIN
  USER
}

model User {
  id          Int       @id @default(autoincrement())
  firstName   String
  lastName    String
  email       String    @unique
  phoneNumber String?   @unique
  password    String
  address     String
  catInfo     CatInfo[]
  booking     Booking[]
  role        Role      @default(USER)
}

model CatInfo {
  id               Int                @id @default(autoincrement())
  catName          String
  age              String
  breed            String
  healthInfo       String
  User             User?              @relation(fields: [userId], references: [id])
  userId           Int
  catDetailBooking CatDetailBooking[]
}

model Booking {
  id            Int      @id @default(autoincrement())
  userId        Int
  checkInDate   DateTime
  checkOutDate  DateTime
  totalPrice    Float
  bookingStatus String
  services      String

  User             User               @relation(fields: [userId], references: [id])
  rooms            BookingRoom[]
  catDetailBooking CatDetailBooking[]
}

model BookingRoom {
  id         Int      @id @default(autoincrement())
  bookingId  Int
  roomtypeId Int
  quantity   Int      @default(1)
  Booking    Booking  @relation(fields: [bookingId], references: [id])
  Roomtype   Roomtype @relation(fields: [roomtypeId], references: [id])
}

enum RoomStatus {
  AVAILABLE
  UNAVAILABLE
  MAINTENANCE
  CLEANING
}

model Roomtype {
  id           Int           @id @default(autoincrement())
  roomType     String
  slug         String        @unique
  size         String?
  capacity     String?
  roomPerNight Float
  description  String?       @db.Text
  imageUrl     String 
  roomStatus   RoomStatus    @default(AVAILABLE)
  booking      BookingRoom[]
}

model CatDetailBooking {
  id        Int     @id @default(autoincrement())
  CatInfo   CatInfo @relation(fields: [catInfoId], references: [id])
  catInfoId Int
  Booking   Booking @relation(fields: [bookingId], references: [id])
  bookingId Int

  @@unique([catInfoId, bookingId])
}

model Image {
  id        Int      @id @default(autoincrement())
  imageUrl  String   @db.VarChar(255)
  createdAt DateTime @default(now())

  @@map("images")
}

// model Settings {
//   id          Int     @id @default(autoincrement())
//   keyName     String  @unique
//   keyValue    String
//   description String?
// }
